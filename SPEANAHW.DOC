
		MIDIインターフェース及びタイマに関する補足

                                                 By Ken/ichiro(OPA)


	※重要事項が書かれていますので、必ず最後までお読みください。

・使用可能なハードウェア

	◎以下に挙げるMIDIインターフェースが使用可能です。

	　・SuperMPU を ‥‥‥‥‥‥‥‥‥‥‥‥‥ 4枚/ 8portまで
	　・MPU401 および互換品を ‥‥‥‥‥‥‥‥ 4枚/ 4portまで
	　・Sound Blaster 16 を ‥‥‥‥‥‥‥‥‥ 2枚/ 2portまで
	　・MOTU MIDI Timepiece AV を ‥‥‥‥‥‥ 1台/ 8portまで
	　　又は MOTU PC-MIDI Flyer を‥‥‥‥‥‥ 1台/ 2portまで
	　・EMU-232C , MA01 および同等品を‥‥‥‥ 1台/ 1portまで
	　　又は音源のシリアル端子に直結して‥‥‥ 1台/ 8portまで

	◎以下に挙げるタイマが使用可能です。

	　・マシン内蔵のインターバルタイマ
	　・SuperMPU内蔵のタイマ1
	　・FM音源(PC-9801-26,73,86及びその互換品)のタイマA
	　・マウスインターフェース割り込み
	　・VSYNC割り込み

	◎作者の予想外の要因により、インターフェースとマシンとの組み合わせに
	　よっては、正しく動作しないことがあります。
	　本ソフトウェアに関することをメーカーへ問い合わることは避けて下さい。

	◎I/Oアドレスおよび割り込み番号が競合していると、システムにダメージを
	　与えるおそれがあります。


・各種ハードウェアの認識

	ハードウェアのポートアドレスや割り込み番号を変更した場合、又は
	マシンが速すぎるなどの理由でハードウェアの自動認識に失敗する場合は、
	各自 対応する環境変数を設定しなければなりません。

	・SuperMPUの場合
	    SET SMPU=AE0 I2		(1枚目)
	    SET SMPU_2=AE0 I2		(2枚目)
	    SET SMPU_3=AE0 I2		(3枚目)
	    SET SMPU_4=AE0 I2		(4枚目)
	・MPUの場合
	    SET MPU=AE0 I2		(1枚目)
	    SET MPU_2=AE0 I2		(2枚目)
	    SET MPU_3=AE0 I2		(3枚目)
	    SET MPU_4=AE0 I2		(4枚目)
	・SB16の場合
	    SET BLASTER=AD2 I5 D3	(1枚目)
	    SET BLASTER_2=AD2 I5 D3	(2枚目)
	・MIDI Timepiece AVの場合
	    SET MTPAV=A140
	・PC-MIDI Flyerの場合
	    SET FLYER=A140
	・PC-9801-26(FM音源ボード)の場合
	    SET FM26=A1 I5
	・PC-9801-73(FM音源ボード)の場合
	    SET FM73=A1 I5
	・PC-9801-86(FM音源ボード)の場合
	    SET FM86=A1 I5

	　以上の例は工場出荷時の設定内容です。Axxでベースアドレス、Ixで
	　拡張スロット割り込み番号(SB16のみIRQ番号)をそれぞれ指定します。

	・RS-MIDIの場合
	    SET RSMIDI=B31250 I0	(MA01等のアダプタを使用する場合)
	    SET RSMIDI=B31250 I1	(SC55mk2等 の PC-1 モードの場合)
	    SET RSMIDI=B38400 I1	(SC55mk2等 の PC-2 モードの場合)
	    SET RSMIDI=B31250 I2	(SC88等 の PC-1 モードの場合)
	    SET RSMIDI=B31250 I8	(シリアル接続(1MHZ)のMTPの場合)

	　RS-MIDIの場合、Bxxxxxには転送レートを10進表記で指定します。
	　音源の設定によって、"B31250" 又は "B38400" を指定してください。
	　IxにはRS-MIDIで制御するポート数(0-8)を指定します。マルチポート動作を
	　させない場合(RS-MIDIアダプタを使う場合など)は I0 と指定して下さい。

	存在しないハードウェアを認識してしまう場合、頭に!をつけた環境変数
	(!MPU !BLASTER !RSMIDI等)を設定することにより、強制的にそのハード
	ウェアを認識しないようにできます。この場合「=」以降の定義内容は、
	なんでも構いません。

	本体内蔵のタイマ、マウス、VSYNC割り込みは、ほぼすべてのマシンに搭載
	されていますが、特に使用したくない場合は、それぞれ環境変数 !TIMER
	!MOUSE !VSYNC を設定することにより、そのハードウェアを使用しない
	ようにできます。定義内容はなんでも構いません。

	定義内容は誤りがないものとしてそのまま使用されますので、間違わ
	ないように注意してください。

	環境変数xxxxと!xxxxが共に設定されている場合、後者が優先されます。


・ハードウェア別特記事項

　◎SuperMPU                ---------------------------------------------------

　　MIDIデータの入出力はメッセージ単位で行われます。従って、MIDI規格に沿って
　　いないメッセージを送受信することはできません。ランニング・スティタスの
　　処理は、SuperMPU自身が行います。

　　ノートオフメッセージを送信する時は、対応するノートオンが先行して送信されて
　　いなければなりません。

　　リアルタイムメッセージを、エクスクルーシブの途中に挟んで送信することは可能
　　ですが、それ以外のメッセージの途中に挟んで送信することはできません。

　　エクスクルーシブのデータは、2バイトづつ送信されます。つまり、偶数バイト毎に
　　インターバルを設けるなら、分割エクスクルーシブを送信可能です。

　　あるポートに分割エクスクルーシブを送信中に、他のポートにデータを出力しよう
　　とした場合、そのデータの送信はエクスクルーシブが終了するまで待たされます。

　　同時に2枚以上挿した時や、ボードの設定を変更した時は、環境変数を設定
　　しなければなりません。

　◎MPU401 および互換品                ----------------------------------------

　　MIDIデータの入出力はバイト単位で行われます。

　　同時に2枚以上挿した時や、ボードの設定を変更した時は、環境変数を設定
　　しなければなりません。

　◎Sound Blaster 16                -------------------------------------------

　　MIDIデータの入出力はバイト単位で行われます。

　　内蔵バッファの性能の問題で、SuperMPUやMPU401に比べて、マシンの負荷が
　　大きくなる傾向があります。

　　同時に2枚以上挿した時や、ボードの設定を変更した時は、環境変数を設定
　　しなければなりません。

　◎MOTU MIDI Timepiece AV                -------------------------------------

　　パラレルポートを介して接続し、"GLOBAL HARDWARE SETUP" の "MAC SPEED" を
　　"FAST" に設定すると、より高いパフォーマンスが得られます。

　　MIDIデータの入出力はメッセージ単位で行われます。ランニング・スティタスの
　　処理は、MTP AVの設定に従ってMTP AV自身が行います。

　　アクティブセンシング(FE)とリセット(FF)は送信できません。

　　MIDIタイミングクロック(F8)は、ソフトからは8ポート全てに送信する/しないを
　　設定可能です。各ポート毎に送信する/しないを切り換えるには、手動でMTP AVの
　　設定を変更する必要があります。

　　リアルタイムメッセージを、他のメッセージの途中に挟んで送信することは
　　できません。

　　エクスクルーシブのデータは、一旦MTP AV内部のバッファに貯えられ、EOXが来るか
　　バッファが一杯になった時点であふれた分だけ、送信されます。

　　あるポートに分割エクスクルーシブを送信中、他のポートにメッセージを送信する
　　ことはできません。

　　MTP AVのケーブルルーティングの設定によっては、送受信データが取りこぼされる
　　ことがあります。(例:Cable in 1〜8全てをCable out 1に繋ぎ、8人でセッション
　　しつつ本ソフトでCable out 1からバルクダンプを送信した場合など)

　◎MOTU PC-MIDI Flyer                -----------------------------------------

　　MIDIデータの出力はバイト単位で、入力はメッセージ単位で行われます。

　◎EMU-232C , MA01 および同等品                -------------------------------

　　MIDIデータの入出力はバイト単位で行われます。

　　バッファがほぼ無いに等しいので、マシンの負荷が大きくなる傾向があります。
　　また、長い割り込み禁止状態が発生した場合、MIDI INのデータを取りこぼす
　　ことがあります。

　　未定義のMIDIメッセージ(F5)を正しく無視できない音源を使う場合、環境変数を
　　設定しなければなりません。

　◎音源のシリアル端子直結                -------------------------------------

　　MIDIデータの入出力はバイト単位で行われます。

　　バッファがほぼ無いに等しいので、マシンの負荷が大きくなる傾向があります。
　　また、長い割り込み禁止状態が発生した場合、MIDI INのデータを取りこぼす
　　ことがあります。

　　マルチポート動作ができるかどうかは音源に依存します。
　　例えば、SC55mk2ではマルチポート動作はできません。

　　3ポート以上使う場合、環境変数を設定しなければなりません。

　◎マシン内蔵のインターバルタイマ                -----------------------------

　　使用可能な割り込み周波数の範囲は 40〜3200Hz です。

　◎SuperMPU内蔵のタイマ1                --------------------------------------

　　使用可能な割り込み周波数の範囲は 0.1〜1000Hz です。

　◎FM音源(PC-9801-26,同73,同86及びその互換品)のタイマA                --------

　　使用可能な割り込み周波数の範囲は 55〜3000Hz です。

　◎マウスインターフェース割り込み                -----------------------------

　　使用可能な割り込み周波数は 15, 30, 60, 120Hz のいずれかです。

　◎VSYNC割り込み                ----------------------------------------------

　　割り込み間隔は不定です。(約60Hz)


・謝辞

	記載の社名、製品名は各社の商標または登録商標です。


Thank you.
                                            制作・著作

                                                   HGF00102@nifty.ne.jp

                                                     おぱ (Ken/ichiro)
